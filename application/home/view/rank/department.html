{extend name="public/common"}

{block name="style"}
<style>
    html,body{
        height:100%;}
    body {background-color: #f1f1f1}
    *{margin: 0;padding: 0;}
    body,html{overflow-x:hidden;}
    ul{margin:0;}
    ul li {list-style: none;}
    .top{height: 50vw;width: 100vw; background: -webkit-linear-gradient(left,#e4672d, #e9ad2c);border-bottom: 2.7vw solid #efeef3;}
    .top .top_top{width: 100%;height: 37vw;font-size: 13px;}
    .top .top_top img{width: 21vw;height: 21vw;border-radius: 50%;margin-top: 3vw;margin-left: 40vw;}
    .top .top_top p{color: #fff;  font-size: 0.38rem; text-align: center;margin-top: -4vw;}
    .top .top_body{height: 10.6vw;width: 100%;position: relative;}
    .top .top_body ul li{height: 100%;text-align: center;}
    .top .top_body span{width: 0;height: 8.5vw;border-right: 1px solid #fff;position: absolute;left: 49.5%;top: 4px;}
    .top .top_body p{font-size: 0.32rem;color: #fff;margin-bottom: 3px;line-height: 4vw;display: inline-block;}
    .top .top_body a{position: absolute;right: 0;top: 0;width: 50%;height: 100%;z-index: 1;}
    #score img{width:5.3vw;height:5.3vw}
    #score span{line-height: 8vw}
    .body{width:100%;border-top: 1px solid #e4e4e4;}
    .body .body_top{margin-bottom: 4.4vw;}
    .body .body_top img{width: 5.3vw;}
    .body .body_top span{font-size: 0.32rem;color: #666;position: relative;top: 1.3vw;}
    .body .body_body{width: 100%;height: 9.7vw;margin-bottom: 0.5vw}
    .body .body_body ul li{width: 33.33%;float: left;font-size: 16px;color: #231815;font-weight: 600;text-align: center;}
    .body .body_body ul li p{position: relative;padding-bottom: 3.2vw;margin: 0;}
    .body .body_body ul li:first-child{padding-left: 10.7vw;}
    .body .body_body ul li:nth-child(2){padding: 0 5.3vw;}
    .body .body_body ul li:last-child{padding-right: 10.7vw;}
    .body .body_body .active p{border-bottom: 0.8vw solid #ee7919;}
    .main {background-color: #fff}
    .foot{width: 100vw;}
    .foot .rank{width: 100vw;}
    .rank ul{padding: 0 0.26rem;}
    .rank ul li{font-size: 0.32rem;}
    .rank ul li span:nth-child(1){display: inline-block;width: 10%;text-align: center}
    .rank ul li span:nth-child(2){display: inline-block;width: 70%;}
    .rank ul li span:nth-child(3){display: inline-block;width: 20%;text-align: center}
    .foot .rank ul li{width:100vw;height: 16vw;display:flex;align-items:center;border-bottom: 1px solid #ecebeb;color: #231815;font-weight: 500;}
    .foot .rank ul li .ranking{display:inline-block;width:6.7vw;font-size: 12px;margin-left: 4vw;}
    .foot .rank ul li:first-child .ranking{color: #eba52c;}
    .foot .rank ul li:nth-child(2) .ranking{color: #c5c5c5;}
    .foot .rank ul li:nth-child(3) .ranking{color: #dd8723;}
    .foot .rank ul li .department{display:inline-block;width:60vw;font-size: 14px;margin-left: 2.7vw;}
    .foot .rank ul li .int{font-size: 12px;float: right;margin-right: 5.3vw;}
    #score{position:relative;top: -70%;right: -49%;color:#fff;}
    #score img{position: relative;top: 0;right:0;}
    #score span{    position: relative;
        top: 7.5vw;
        right: 10vw;
        font-size: 0.32rem;}
    .modal-content{background-color:#fff;width: 95%;
        height:70vh;overflow: scroll;}
    #close{margin: 21.3vw auto 0 auto;display: block}
    #myModalLabel{text-align: center;font-size: 22px;}
    #myModal{overflow-x: hidden;position: fixed;}
    .overHide{overflow: hidden;height: 100%;}
    .cc{ overflow-y:auto;}
    @media screen and (max-width: 320px){
        #score span{
            right: 12vw;
        }
        .foot{
            margin-top: 4px;
        }
    }
    @media screen and (min-width: 760px){
        #score span{
            right: 8.5vw;
        }
        h5{line-height: 36px;margin: 0}
    }
    @media screen and (min-width: 1000px){
        #score span{
            right: 6vw;
        }
        h5{line-height: 40px;margin: 0}
    }

    @media only screen and (min-device-width: 414px) and (max-device-width: 736px) and (orientation : portrait) {
        #score span{
            right: 9vw;
        }
    }
    .h4, h4 {
        font-size: 0.38rem;
        line-height: 0.5rem;
    }
    b, strong {
         font-weight: 700;
        font-size: 0.42rem;
     }
    .modal-body h4 p{
        font-size: 0.36rem;
        color: #333;
    }
    .modal-body h4 span{
        font-size: 0.32rem;
        color: #666;
        padding-left: 0.5rem;
        display: inline-block;
    }
    @media (min-width: 768px) {
        .modal-dialog {
            width: auto;
            margin: 30px auto;

        }
    }
    .modal-open{overflow:hidden;position:fixed;}
</style>
{/block}

{block name="body"}
<div class="main">
    <div class="top">
        <div class="top_top">
            {eq name="visit" value="1"}
            <img src="/home/images/common/vistor.jpg">
            <p>游客</p>
            {else/}
            <img src="/home/images/banner/pb.png" id="pic">
            <div id="score">
                <img src="/home/images/rank/score.png" alt="规则" data-toggle="modal" data-target="#myModal">
                <span data-toggle="modal" data-target="#myModal">积分规则</span>
            </div>
            <p>{$name}</p>
            {/eq}
            <!--<p>杭州</p>-->
        </div>
        <div class="top_body">
            <ul>
                <li>
                    <p>部门所有积分：</p>
                    {eq name="visit" value="1"}<p>无</p>{else/}<p>{$score}</p>{/eq}
                </li>
            </ul>
        </div>
    </div>
    <!-- 模态框（Modal） -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <img src="/home/images/user/close.png" alt="规则" data-dismiss="modal" aria-hidden="true" style="width:12vw;height:12vw" id="close">
            <div class="modal-content" style="margin:6vw auto" id="modalBody">
                <div style="width: 0;height: 6.4vw;border-right: 2px solid rgba(237, 218, 145, 0.63);margin: -6.4vw auto 0;"></div>
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">
                        <b>积分规则</b>
                    </h4>
                </div>
                <div class="modal-body">
                    <h4 style="font-weight: normal">
                        <p>1、党建责任</p>
                            <span>党委（党组）听取汇报和专题研究，2次/年（2分）</span><br>
                            <span>书记责任清单（2分）</span><br>
                            <span>书记述职1000字以上（1分）</span><br>
                            <span>支部书记述职500字以上（1分）</span><br>
                            <span>党建年度工作计划和党建工作要点文件（2分）</span>
                        <p>2、两学一做</p>
                        <span>方案（1分）、部署会议记录（1分）</span><br>
                        <span>支部党员大会,1次每季度(1分)</span><br>
                        <span>支部委员会，1次每月（1分）</span><br>
                        <span>党小组会，1次每月（1分）</span><br>
                        <span>领导干部交流发言（1分）</span><br>
                        <span>领导干部讲党课（2分）</span><br>
                        <span>全年学习计划和培训计划(1分)、理论研究1500字（1分）</span><br>
                        <span>主题党日（2分）</span><br>
                        <p>3、作风建设</p>
                        <span>“作风建设年”活动有部署、有方案（2分）</span><br>
                        <span>开展“解放思想，担当有为”主题大讨论和“金点子”征集活动(2分)</span><br>
                        <span>挖掘培树“大抓项目年”和“作风建设年”活动中涌现出的先进典型（2分）</span><br>
                        <span>“五查五看”，党员责任和整改清单（2分）</span><br>
                        <p>4、志愿服务</p>
                        <span>“四跑”志愿服务方案和总结800字（2分）</span><br>
                        <span>志愿服务一条街和三走进有照片（4分）</span><br>
                        <p>5、组织建设</p>
                        <span>党支部规范化建设台帐资料（4分）</span><br>
                        <span>阵地、党费、换届组织本单位党员干部关注“台州红云”订阅号，被《台州机关党建》简报或“台州红云”微平台录用信息4条以上（2分）</span><br>
                        <p>6、党风廉政</p>
                        <span>落实主体责任（2分）</span><br>
                        <span>廉政教育（2分）</span><br>
                        <span>落实机关纪检工作情况报告制度（2分）</span><br>
                        <p>7、特色创新</p>
                        <span>特色工作或党建创新理论文章1000字以上（10分）</span><br>
                    </h4>

                </div>
                <!--<div class="modal-footer">-->
                <!--<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>-->
                <!--</div>-->
            </div>
        </div>
    </div><!-- /.modal -->

    <div class="body">
        <div class="body_top">
            <img src="/home/images/banner/int.jpg">
            <span>系统积分排行榜</span>
        </div>
    </div>
    <div class="foot" id="body">
        <div class="rank" age="1">
            <ul>
                {volist name="all" id="al"}
                <li>
                    <span>{$i}</span>
                    <span>{$al.name}</span>
                    <span>{$al.score}分</span>
                </li>
                {/volist}
            </ul>
        </div>
    </div>
</div>
{/block}

{block name="script"}
<script type="text/javascript">
//切换
$(function() {
    function IsPC() {
        var userAgentInfo = navigator.userAgent;
        var Agents = ["Android", "iPhone",
            "SymbianOS", "Windows Phone",
            "iPad", "iPod"];
        var flag = true;
        for (var v = 0; v < Agents.length; v++) {
            if (userAgentInfo.indexOf(Agents[v]) > 0) {
                flag = false;
                break;
            }
        }
        return flag;
    }

    flag = IsPC();
    if(flag){
        $(".main").css({"width":"640px","left":"50%","margin-left":"-320px","min-height":"90vh","margin-top":"5vh","position":"relative"});
        $(".top").css({"width":"640px","margin":"0 auto","height":"320px","border-bottom":"10px solid #efeef3"});
        $(".top .top_top").css({"width":"640px","height":"245px"});
        $(".top .top_top img").css({"width":"110px","height":"110px","margin-left":"265px","margin-top":"50px"});
        $("#score").css({"top":"-200px"});
        $(".foot .rank").css("width","640px");
        $(".foot .rank ul li").css({"width":"100%","height":"80px"});
        $("#score img").css({"width":"30px","height":"30px"});
        $("#score span").css({"right":"60px","top":"80px"});
        $(".top .top_top p").css("margin-top","-60px");
        $(".body").css({"width":"640px","margin":"0 auto"});
        $(".body .body_top").css("margin-bottom","30px");
        $(".body .body_top img").css({"width":"30px"});
        $(".body .body_top span").css({"font-size":"14px","top":"5px"});
        $(".top .top_body").css("height","40px");
        $(".modal-content").css({"width":"600px","height":"540px"});
        $("#close").css({"margin":"12vw auto","width":"80px","height":"80px"})
    }








    //模块标题
    $('title').text('支部排行榜');
    $("#title").find("li").each(function () {
        $(this).on('click', function () {
            $(this).addClass("active").siblings().removeClass();
            var name = $(this).attr("name");
            $("#body").find(".rank").each(function () {
                var age = $(this).attr("age");
                if (name == age) {
                    $(this).show().siblings().hide();
                }
            });
            $('.department').each(function () {
                var _this = $(this);
                var ww = $('body').width();
                var h = _this.height();
                if (h > (0.18 * ww ) && ww < 900) {
                    _this.css({'height': 0.16 * ww + 'px', 'line-height': 0.08 * ww + 'px'});
                }
            })
        });
    });
    $('.department').each(function () {
        var _this = $(this);
        var ww = $('body').width();
        var h = _this.height();
        if (h > (0.18 * ww ) && ww < 900) {
            _this.css({'height': 0.16 * ww + 'px', 'line-height': 0.08 * ww + 'px'});
        }
    });
    $('#score span,#score img').click(function () {
        $('#myModal').show();
        $("html").addClass("modal-open");
    });
    $(".modal").click(function(){
        $("html").removeClass("modal-open");
    })
    $(".modal-content").on("click",function(e){
        e.stopPropagation();
    })

})

</script>
{/block}